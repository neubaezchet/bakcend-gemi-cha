name: Keep Render Services Alive

on:
  schedule:
    # Cada 14 minutos (100% gratis, dentro de l√≠mite)
    - cron: '*/14 * * * *'
  
  workflow_dispatch:  # Ejecutar manualmente si quieres

jobs:
  ping-services:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    
    steps:
      - name: Ping Backend
        continue-on-error: true
        run: |
          echo "üîÑ Pinging Backend..."
          curl -s -o /dev/null -w "‚úÖ Backend: HTTP %{http_code}\n" \
            --max-time 10 \
            https://bakcend-gemi-cha-2.onrender.com/health || echo "‚ö†Ô∏è Backend fall√≥"
      
      - name: Ping N8N
        continue-on-error: true
        run: |
          echo "üîÑ Pinging N8N..."
          curl -s -o /dev/null -w "‚úÖ N8N: HTTP %{http_code}\n" \
            --max-time 10 \
            https://n8n-incaneurobaeza.onrender.com/healthz || echo "‚ö†Ô∏è N8N fall√≥"
      
      - name: Summary
        run: |
          echo ""
          echo "=========================================="
          echo "‚úÖ Keep-Alive completado"
          echo "üìÖ $(date -u '+%Y-%m-%d %H:%M:%S UTC')"
          echo "‚è∞ Pr√≥xima ejecuci√≥n: en 14 minutos"
          echo "=========================================="